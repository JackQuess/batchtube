{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "sh -c 'ENTRY=${SERVICE_ENTRY:-server}; if [ -z \"$ENTRY\" ]; then ENTRY=server; fi; npm run prisma:generate; if [ \"$ENTRY\" = \"server\" ] && [ \"${RUN_MIGRATIONS:-false}\" = \"true\" ]; then npm run prisma:migrate; fi; if [ \"$ENTRY\" = \"worker\" ]; then ENTRY=queues/worker; fi; if [ ! -f \"dist/${ENTRY}.js\" ]; then npm run build; fi; node \"dist/${ENTRY}.js\"'"
  }
}
